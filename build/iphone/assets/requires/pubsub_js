module.exports=function(){
var self={

init:function(params){},

publish:function(params){
var xhr=Ti.Network.createHTTPClient({validatesSecureCertificate:!Alloy.CFG.isLocal});
xhr.open("POST",Alloy.CFG.pubsub_uri+"publish"),
xhr.onload=function(){
null!=params.callback&&params.callback();
},xhr.onerror=function(e){
globals.console.info(e),
null!=params.onError&&params.onError(e);
},
xhr.send({channel:params.channel,data:params.message});
},

subscribe:function(params){
var xhr=Ti.Network.createHTTPClient({validatesSecureCertificate:!Alloy.CFG.isLocal});
xhr.open("POST",Alloy.CFG.pubsub_uri+"topic"),
xhr.onload=function(){
var xhr=Ti.Network.createHTTPClient();
xhr.timeout=1.8e5,
xhr.open("POST",Alloy.CFG.pubsub_uri+"subscribe"),
xhr.onload=function(){
var res=JSON.parse(this.responseText);

null!=params.callback&&params.callback(res.data);
},xhr.onerror=function(e){
globals.console.info(e);
},
xhr.send({channel:params.channel,type:1}),

params.connect();
},xhr.onerror=function(e){
globals.console.info(e),
null!=params.onError&&params.onError(e);
},
xhr.send({channel:params.channel});
}};

return self;
}();