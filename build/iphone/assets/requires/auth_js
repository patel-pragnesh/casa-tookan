module.exports=function(){
var self={},

cache=require("requires/cache"),
util=require("requires/util"),

TiTouchId=require("ti.touchid");













































































































































return self.REASON_CANCEL=-1,self.REASON_EASY=0,self.REASON_SECONDEPASSWORD=1,self.REASON_PASSWORD=2,self.REASON_TOUCHID=3,self.checkPasscode=function(params){function input_password(){var info=globals.datas;if(null!=info.easypass){var easyInput=util.createEasyInput({type:"change",callback:function(number){params.callback({success:!0,reason:self.REASON_EASY,inputText:number})},cancel:function(){params.callback({success:!1,reason:self.REASON_CANCEL})}});easyInput.open()}else{function input(){var message=L("text_inputpass"),dialog=util.createInputDialog({title:params.title,message:message,passwordMask:!0,buttonNames:[L("label_cancel"),L("label_ok")]});dialog.origin.addEventListener("click",function(e){var inputText=1?e.text:dialog.androidField.value;if(e.index==e.source.cancel)params.callback({success:!1,reason:self.REASON_CANCEL});else if(cache.data.password===inputText)params.callback({success:!0,reason:self.REASON_PASSWORD,inputText:inputText});else{var dialog2=util.createDialog({message:L("text_wrongpass"),buttonNames:[L("label_close")]});dialog2.addEventListener("click",function(e){input()}),dialog2.show()}}),dialog.origin.show()}input()}}1?null==cache.data.isTouchId?input_password():TiTouchId.authenticate({reason:L("label_fingerprint"),callback:function(e){e.success?params.callback({success:!0,reason:self.REASON_TOUCHID}):e.code==TiTouchId.ERROR_USER_CANCEL?params.callback({success:!1,reason:self.REASON_CANCEL}):input_password()}}):input_password()},self.check=function(params){function input_password(){var info=globals.datas;if(null!=info.easypass){var easyInput=util.createEasyInput({type:"confirm",callback:function(number){params.callback({success:!0,reason:self.REASON_EASY,inputText:number})},cancel:function(){params.callback({success:!1,reason:self.REASON_CANCEL})}});easyInput.open()}else{function input(){var message=L("text_inputpass"),dialog=util.createInputDialog({title:params.title,message:message,passwordMask:!0,buttonNames:[L("label_cancel"),L("label_ok")]});dialog.origin.addEventListener("click",function(e){var inputText=1?e.text:dialog.androidField.value;if(e.index==e.source.cancel)params.callback({success:!1,reason:self.REASON_CANCEL});else if(cache.data.password===inputText)params.callback({success:!0,reason:self.REASON_PASSWORD,inputText:inputText});else{var dialog2=util.createDialog({message:L("text_wrongpass"),buttonNames:[L("label_close")]});dialog2.addEventListener("click",function(e){input()}),dialog2.show()}}),dialog.origin.show()}input()}}1?null==cache.data.isTouchId?input_password():TiTouchId.authenticate({reason:L("label_fingerprint"),callback:function(e){e.success?params.callback({success:!0,reason:self.REASON_TOUCHID}):e.code==TiTouchId.ERROR_USER_CANCEL?params.callback({success:!1,reason:self.REASON_CANCEL}):input_password()}}):input_password()},self.useTouchID=function(params){TiTouchId.authenticate({reason:L("label_fingerprint"),callback:function(e){Ti.API.info("callback"),e.success?params.callback({success:!0}):params.callback({success:!1})}})},self;
}();